2025-03-13 15:05:36,359 [INFO] Weekly summary request - selected_week: None, show_all: False
2025-03-13 15:05:36,359 [INFO] No week selected, using current week: 2025-W11
2025-03-13 15:05:36,359 [INFO] Fetching available weeks
2025-03-13 15:05:36,360 [INFO] Found 37 distinct dates with time entries
2025-03-13 15:05:36,362 [INFO] Processed 6 unique weeks
2025-03-13 15:05:36,362 [INFO] Final view settings - selected_week: 2025-W11, show_all: False
2025-03-13 15:05:36,362 [INFO] Found 26 time entries for week 2025-W11
2025-03-13 15:09:58,061 [ERROR] Exception on /job/50/invoice [GET]
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/flask/app.py", line 2525, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/app.py", line 1822, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/app.py", line 1820, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/app.py", line 1796, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jobmanager/app/db.py", line 35, in decorated_function
    return f(db, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jobmanager/app/routes/job_routes.py", line 526, in invoice
    return render_template('invoice.html',
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/templating.py", line 147, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/templating.py", line 130, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/jinja2/environment.py", line 1301, in render
    self.environment.handle_exception()
  File "/usr/lib/python3/dist-packages/jinja2/environment.py", line 936, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/Jobmanager/app/templates/invoice.html", line 2, in top-level template code
    {% extends "base.html" %}
  File "/home/Jobmanager/app/templates/base.html", line 43, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jobmanager/app/templates/invoice.html", line 101, in block 'content'
    {% set entry_date_obj = datetime.strptime(entry_date, '%Y-%m-%d').date() %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/jinja2/environment.py", line 485, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'datetime' is undefined
